[toc]

| 序号 | 修改内容             | 修改日期   | 版本  | 修改人 | 备注 |
| :--: | -------------------- | ---------- | ----- | ------ | ---- |
|  1   | 首次撰写（内容大纲） | 2019-12-25 | V 1.0 | 施艺东 |      |
|  2   | 编写出货检测部分     | 2020-01-06 | V 1.1 | 施艺东 |      |
|  3   | 编写常见问题部分     | 2020-01-17 | V 1.2 | 施艺东 |      |
|  4   | 设置 gitbook 启动    | 2020-02-17 | V 1.3 | 施艺东 |      |
|  5   |                      |            |       |        |      |



# 导语

&emsp;&emsp;







# 1. 设备介绍

## 1.1 接收头

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/receiver.png" alt="receiver" style="zoom:33%;" />

<center><i>（图 1.1 - 接收头的正、反面）</i></center>
外观标识、包含组件模块、使用方式、注意事项、与杆子的使用

## 1.2 杆子

用途，使用注意事项、与接收头的组装

## 1.3 数字工作站底座

底座屏幕、底座脚架、主工作站（server）、副工作站

## 1.4 球员追踪传感器

传感器包含的模块，可以获得的信息，屏幕的切换，会用到的工具

## 1.5 智能足球

智能足球的激活和休眠，会使用的工具

## 1.6 NFC 读写器

外观、用途、

## 1.7 球员臂套

外观，佩戴方式

## 1.8 相关充电器

## 1.9 箱体、收纳袋

放置、组装、拖动



# 2. 设备出货检测

## 2.1 外观检查

&emsp;&emsp;外观检测部分需要检查出货的所有设备是否有明显的刮痕、损坏，杆子和底座的伸缩是否正常等，特别需要注意的有：接收头的工作灯、工作站底座的屏幕 以及 各个设备的 INSAIT logo 是否完整。

&emsp;&emsp;需要检查的项目包含：

| 序号 | 检测项目| 检测内容                               | 通过标准                                                     |
| :--: | :------------------ | ------------------------------------------- | :----------------------------------------------------------- |
|  1   | 接收器     | 1. 接收头和杆子的悬接<br />2. 杆子的伸缩    | 1. 接收头正确插入杆子的航空头，航空头的旋扣已旋紧，外围杆子的旋扣也已旋紧；<br />2. 杆子的两节都可正常伸、缩 |
|  2   | 工作站     | 1. 屏幕外观和 logo <br />2. 工作站脚架伸缩  | 屏幕和INSAIT logo 无明显刮痕和脱落；<br />工作站脚架可正常伸、缩 |
|  3   | 传感器     | 外观刮痕                                    | 传感器外观无明显刮痕，特别是屏幕部分                         |
|  4   | 智能球     | 1. 球体形状<br />2. logo                    | 球体形状无发生形变<br />外观和 INSAIT logo无明显刮痕         |
|  5   | 臂套       | 1. logo<br />2. 弹性伸缩<br />3. 臂套缝接处 | 臂套上的 INSAIT logo 无脱落现象<br />臂套缝接处平整，不会割伤，臂带伸缩性正常 |
|  6   | 箱体       | 1. logo<br />2. 箱体开合                    | 箱体外观和INSAIT logo 无明显刮痕和脱落；<br />箱体开合正常   |
|  7   | 杆子收纳袋 | 1. 外观<br />2. 拉链和手提带                | 收纳袋外观无明显破损和INSAIT logo无脱落现象<br />拉链和手提带可正常使用 |



## 2.2 上电检测

&emsp;&emsp;在确保外观正常可使用后，我们需要对所有的设备进行充电、上电检测。

&emsp;&emsp;需检测的项目如下：

| 序号 | 检测项目   | 检测内容                                                     | 通过标准                                                     |
| :--: | ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
|  1   | 工作站底座 | 1. 6 个工作站能否正常充电<br />2. 充电指示灯<br />3. 底座屏幕是否花屏<br />4. 开机按钮和切换屏幕按钮 | 1. 工作站指示灯的状态：<br /> - 充电时：红灯慢闪<br /> - 充满电：红灯长亮<br /> - 开机时：绿灯长亮<br /> - 低电量时：红灯快闪<br /> 2. 工作站能正常充电，充满电后屏幕的电量指示正确显示 100%<br />3. 可以正常开关机。开机后，屏幕正常显示工作站信息，无花屏现象<br />4. 切换屏幕的按钮可正常按压，屏幕跟着切换 |
|  2   | 接收器     | 1. 6 根接收器能通电<br />2. 接收器的工作灯正常               | 1. 6 根接收器都能按照外观标识较容易拔、插到数字工作站底座，且能通电工作<br />2. 接收器指示灯的状态：<br /> - 传感器已开机：绿灯长亮，红灯闪烁<br /> - 传感器未开机：绿灯长亮，红灯也长亮 |
|  3   | 传感器     | 1. 传感器能否正常充电<br />2. 充电指示灯<br />3. 4 个充电器是否可用<br />4. 开关机和切换屏幕<br />5. 心率模块灯正常亮起 | 1. 传感器指示灯的状态：<br /> - 充电时：**紫**灯长亮<br /> - 充满电：红灯长亮<br /> - 开机时：绿灯长亮<br /> - 低电量：绿灯快闪<br /> - 未绑定：绿灯慢闪<br />2. 充电时，4 个传感器充电底座工作状态灯都为红色，且能正常给传感器供电<br />3. 传感器能正常开关机，点按可切换屏幕，屏幕内容显示正常，不会显示心率异常、电量异常或者屏幕内容显示工程检测模式<br />4. 开机运行 5 -10 分钟，屏幕和心率模块灯都能正常亮起，不会出现屏幕或者心率模块自动关闭、重启等现象<br />5. 传感器全部开机，查看K编号是否出现重复。正常来说，编号会从 K01 到 K40<br />6. 传感器固件版本检查 |
|  4   | 智能足球   | 1. 智能球充电底座<br />2. 智能球能正常充电                   | 1. 充电底座指示灯状态：<br /> - 充电时：蓝灯长亮<br /> - 充满电：红灯长亮<br />2. 上电时，充电底座若出现红蓝灯交替闪烁，通过将上电中的底座稍微远离带电的其他设备，可以正常恢复红灯长亮的充电状态即可<br />3. 智能足球固件版本检查 |



## 2.3 工作站状态

&emsp;&emsp;若设备通过了上电检测，则可以开始使用INSAIT KS app 连接数字工作站。

&emsp;&emsp;App Store下载安装INSAIT KS app，登录后，iPad 端设置静态IP（请参考章节 “3. 设置静态IP[link](#3. 设置静态IP)” ），进入 KS app 的设置，查看工作站、传感器和智能足球是否都亮起。

### 2.3.1 工作站均亮起

&emsp;&emsp;打开 KS app后进入【设置】 ，选择“设备管理” - 点击下拉框，选择最后一个选项“移动版球场”，当6 个工作站的图标都亮起的时候，则表明网络正常可用。如果是**固定版**的设备，则下拉框选择设备对应的固定版球场即可。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108154751033.png" alt="image-20200108154751033" style="zoom:34%;" />

<center><i>（图 2.3.1-1 KS app设置页面）</i></center>
<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108181348573.png" alt="image-20200108181348573" style="zoom:30%;" />

<center><i>（图 2.3.1-2 KS app工作站正常亮起）</i></center>
### 2.3.2 工作站未亮起

&emsp;&emsp;按照正常流程来说，从仓库拿到的设备，都是已经由生产部门按照出货要求设置过的。

若仍然出现工作站未亮起，需要手动修改，则可以参考如下步骤介绍进行操作。

==操作时，请按照从 副工作站 到 主工作站，一个一个有序的修改。== 

- 移动版 副工作站 到 主工作站 访问地址依次 192.168.1.6 ~ 192.168.1.1 

- 固定版 ，则为：100.100.1.6 ~ 100.100.1.1

#### 2.3.2.1 访问工作站接收器

&emsp;&emsp;首先，iPad 或电脑连接工作站 WiFi ，并且设置静态IP，再在浏览器中访问工作站接收器的设置地址，这里假设是第2个工作站图标没有亮起，则访问地址：http://192.168.1.2 (固定版则为 100.100.1.2)

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108183428773.png" alt="image-20200108183428773" style="zoom:28%;" />

<center><i>（图 2.3.2.1-1 工作站接收器登录页面）</i></center>
- 用户名：admin

- 密码：xiaojiangsystem

> 若输入xxx.2的地址却无法打开此登录页面时，参考章节“7. 无法访问接收器网页[link](#7. 无法访问接收器网页)”

#### 2.3.2.2 超宽带

&emsp;登录成功的页面如下，接着进入”超宽带”菜单，依次确认软件版本、系统类型、模式、ID、网络标识符、射频模式以及网关的值。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108183810061.png" alt="image-20200108183810061" style="zoom:30%;" />

<center><i>（图 2.3.2.2-1 成功登录接收器设置页面）</i></center>
<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210151630084.png" alt="image-20200210151630084" style="zoom:33%;" />

<center><i>（图 2.3.2.2-2 超宽带设置页面）</i></center>
<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108191832299.png" alt="image-20200108191832299" style="zoom:30%;" />

<center><i>（图 2.3.2.2-3 超宽带网关设置页面）</i></center>
不同的工作站的“超宽带”参数，可能对应不同的参数值，具体可参见如下：

- 软件版本：此为工作站接收器UWB模块的固件版本，6 个接收器的版本都应为 V1.0.18。如果不是，请参考章节"3.3 UWB固件升级[link](#3.3 UWB 固件升级)"进行升级。

- 系统类型：6 个接收器的系统类型都应为 `TDOA`

- 模式：主工作站为 `MASTER`，副工作站为 `SLAVE`

- ID：从副工作站到主工作站的 ID 依次为 c006 ~ c001

- **网络标识符**（也称为`PanID`）：出货设备 6个都为 `deca `

- 射频模式： 6 个工作站接收器的射频都为 `4`
- 网关：移动版“服务器IP”都为`192.168.1.110`，服务器端口都为 `44333`；固定版的“服务器IP”则为 `100.100.1.110`，端口也是`44333`。

&emsp;&emsp;参数值都设置正确后，请记得点击右下角的【应用】，页面会进行设置加载，加载结束后请记得还需点击【刷新】，查看参数值有没有真的生效。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108191140963.png" alt="image-20200108191140963" style="zoom:30%;" />

<center><i>（图 2.3.2.2-4 设置生效提示）</i></center>
#### 2.3.2.3 管理（WiFi）

&emsp;&emsp;管理菜单 - 固件升级，此处的“当前版本”是指 WiFi 的固件版本，目前 6 个工作站接收器的 WiFi 版本都应为 v1.0.25，如果不是，请参考章节“3.4 WiFi 固件升级[link](# 3.4 WiFi 固件升级)”进行升级。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108192202336.png" alt="image-20200108192202336" style="zoom:33%;" />

<center><i>（图 2.3.2.3-1 管理页面）</i></center>
#### 2.3.2.4 网络

网络设置页面如下：

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109144900536.png" alt="image-20200109144900536" style="zoom:33%;" />

<center><i>（图 2.3.2.4-1 网络设置页面）</i></center>
- 网络模式：都为`桥接`
- IP地址：此为第二个接收器B，故为 192.168.1.2（固定版 100.100.1.2）
- 子网掩码：都为255.255.255.0 （固定版255.255.0.0）
- 默认网关：都为192.168.1.254  (固定版 100.100.255.254)
- DNS 服务器 1：都为空
- DNS 服务器 2：都为空

正确输入后，请记得点击【应用】，使设置生效。

> 若需要更改 “IP 地址”，那么在点击【应用】之后，页面会出现空白，无法打开的现象。因为已经将访问的 IP 修改了，故需要重新输入访问的 IP。
>
> 例如，此处将“IP 地址”从 192.168.1.2 改成 192.168.1.3 ，则点击【应用】之后，需要在浏览器访问 192.168.1.3。

#### 2.3.2.5 无线

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109094922756.png" alt="image-20200109094922756" style="zoom:33%;" />

<center><i>（图 2.3.2.5-1 无线设置页面）</i></center>
- 无线频率：都选 `5GHz`
- 无线模式：主工作站选择`接入点`，副工作站选择`工作站`
- SSID：根据出货的用途设置，移动版都为“INSAIT”
- AP MAC 地址：不用修改
- 发射功率：不用修改
- 认证加密模式：都选择`WPA2-PSK`
- 加密：都为`AES`
- 口令：即连接 WiFi 时的密码，都为 “GenGeeinsait”。为了确保 6 个工作站的WiFi密码一致无误，==建议通过复制黏贴的方式来输入==，不建议手动输入。

正确输入后，请记得点击【应用】，使设置生效。

&emsp;&emsp;当以上所有步骤的设置完成后，返回到 KS app 查看设置处的工作站图标，若全部亮起，表明网络设置正确，则可以进行下一步工作，查看传感器和智能足球的图标是否亮起，具体见下一章节。



## 2.4 球员传感器状态

&emsp;&emsp;传感器全部开机，连接数字工作站 WiFi，使用KS app查看“设置 - 设置管理”，选择球场，查看传感器部分，验证是否都已全部亮起。

&emsp;&emsp;若有传感器没有亮起，则需要检查传感器的 K 编号是否重复或者PanID 是否错误。

### 2.4.1 传感器 K 编号

&emsp;&emsp;在同一套 INSAIT K 系列设备中，每一个传感器都应该有唯一的、不重复的“K编号”，在传感器屏幕中显示为`Kxx`。目前，有两种情况可以判断传感器 ID 是否出现重复：

- 将传感器全部开机，短按屏幕，按K 编号顺序排列，检查是否存在重复的 K 编号
- 使用带有定位轨迹的 INSAIT app 时，轨迹画面中的球员圆点快速的来回抖动、瞬移

&emsp;&emsp;修改 K 编号可以通过NFC进行配置修改，具体操作请参考本章“2.4.3 NFC修改[link](#2.4.3 NFC 修改传感器配置信息)”。



### 2.4.2 传感器 PanID

&emsp;&emsp;`PanID` 是指在同一套 INSAIT K 系列设备中使用的唯一 ID，出货设备默认都为`deca`。

&emsp;&emsp;在同一套INSAIT K 系列中，需要设置相同PanID 的设备有：6 根接收器、智能足球和传感器。

- 接收器：

  根据章节 “2.4.1 工作站均亮起[link](# 2.4.1 工作站均亮起)”，可以在 KS app 设置 - “设备管理”中，直接点击工作站图标，进入详情页面，查看“网络标识符”的值，即为此套设备的 PanID；

  <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109154927906.png" alt="image-20200109154927906" style="zoom:30%;" />

  <center><i>（图 2.4.2-1 KS app 设备管理 - 工作站详情页）</i></center>
否则可以直接访问每一个接收器的“超宽带”设置页面进行确认，参考章节 “2.3.2.2 超宽带[link](# 2.3.2.2 超宽带)”。
  
- 智能足球：

  通过安卓的apk进行蓝牙读取和修改，请参考章节“2.5.3.2 修改智能足球 PanID[link](#2.5.3.2 修改智能足球 PanID)”

- 球员追踪传感器：

  短按传感器到 K 编号屏幕，再长按约 3 秒进入”Tracker 信息“，第一屏即会显示 PanID 的值。

> 多套设备同时在同一个地方使用，PanID不能重复，需要进行隔离（此场景的具体隔离操作，参考章节 xxxx）。



### 2.4.3 NFC 修改传感器配置信息

**1. 准备工具**

&emsp;&emsp;用 NFC 来读写传感器配置信息，首先，需要一把支持 **NFC** 读写的安卓手机，其次，还需要专用的安卓 apk。



**2. 下载与安装**

apk可在 FTP<ftp://QA@192.168.30.3/Packages/Firmware>下载文件名为`TAG2.0 NFC config_v1.2.apk`的安装包，安装后，会出现一个名为`NFC_CONFIG`的 app。



**3. 读取**

先开启安卓手机的 NFC，再打开这个 app，此时 app 界面的参数值都为空。

App中选择左下角的READ选项，将传感器的背面（心率模块一面）贴近手机的 NFC 模块，当听到“噔噔”的声音时，app 界面提示文案“...读取成功！”，参数出现赋值，表读取配置成功。如果没有，请再重试。



**4. 参数配置**

读取成功有参数值的界面如下：

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109174507632.png" alt="image-20200109174507632" style="zoom:25%;" />

<center><i>（图 2.4.3-1 NFC app 配置界面）</i></center>
- DEVICE ID：

  以 5 开头的 4 位数十六进制，例如 5001和 500B在传感器中分别显示为 K01和K11。同一套设备，不同的传感器读取到的 ID 都是不同的。

  > 前文提到的修改 K 编号，就是在此参数输入对应的字符，在写入修改。字母不区分大小写。
  >
  > 若在修改时，无法换算出对应的十六进制值，可先读取上一个 K编号的传感器，再点击“ID+1”，会自动计算出对应的十六进制值。

- PAN ID：

  4 位数十六进制。默认值 deca。

  > 前文提到的同一套设备需要用同一个 PanID，则可在此输入进行修改。字母不区分大小写。

- READ：

  读取传感器时，选择此项。读取成功会听到“噔噔”的提示音，并且 NFC app 文案提示“...读取成功！”

- WRITE：

  当修改完参数值，需要让配置生效时，选择此项，并将传感器再次贴近手机 NFC 模块，听到“噔噔”并且 app 弹出写入成功文案，即配置成功写入。

- CLEAR：

  清空所有参数项的值

- ID+1：

  自动将 DEVICE ID 增加 1，其他参数值不变。可用于帮助计算K 编号对应的十六进制的值，或 当需要修改较多传感器时，只需每写入一个传感器后，点击一次 ID+1 即可快速修改多个传感器 K 编号。

==出货测试中，一般只会修改到`DEVICE ID`和`PAN ID`==，故可先只了解以上几个参数，其余参数按照如下默认值修改即可。

其他参数的介绍：

- Sleep Time：默认值 10，指传感器在完全静置10分钟后，会自动关机。

  > 当值为 0 时，表手动关机。在传感器屏幕为第一屏时，即显示为球员姓名，长按传感器大约 3 秒，会弹出是否关机的倒计时提示，5 秒内点按3次传感器按钮，即可手动关机。

- Language：默认值 0，表示传感器内的语言文字展示为中文，1 为英文。

- UWB FREQ: 默认 15，表UWB 频率。无需改动。

- UWB MODE: 默认 4，表 UWB 射频模式。目前出货的所有设备的 UWB MODE 都应为 4。

  > 在 6 个接收器、智能足球和传感器中，UWB 的射频模式都必须要为 4。

- Test MODE：默认为 0，表发送二代传感器数据包，UWB 最大功率。无需修改。

  > testmode = 0，2 对应二代tag数据包，UWB最大功率
  >
  > testmode = 1，对应二代tag数据包，UWB默认功率
  >
  > testmode = 16，对应一代tag数据包，UWB最大功率
  >
  > testmode = 17，对应一代tag数据包，UWB默认功率
  >
  > testmode = 255，对应生产模式测试界面，UWB为二代数据包，且功率最大。

- TAG TYPE：默认为 0，无需修改

- IMU FREQ：默认 50，无需修改。

- HR FREQ：默认 10，无需修改。

- HR DATA TYPE：默认 0，无需修改。

- PA Flag：传感器固件版本v2.1.3 此值未生效。可不用理会。

  >  新固件版本 v2.1.4 此值生效，默认为 1，表增强tag的发射功率。室内建议此值为 0。

- HW VERSION：新出产的传感器都为 HW-2.0.6，表传感器硬件版本。

  

**5. 参数写入**

最后，修改完参数项，选择右下角的 WRITE，并再次将传感器贴近手机的 NFC 模块，听到“噔噔”，且 app 弹出写入成功的文案，即配置成功写入。若需二次确认，可再次读取此传感器验证配置是否生效。



## 2.5 智能足球状态

&emsp;&emsp;智能足球也需要在设备管理处查看是否能亮起。

首先，确定智能足球已充电，接着KS app查看”设置-设备管理-选择球场“。然后，将球抛出，同时使智能足球高速旋转从而唤醒智能足球。最后，回到KS app，查看智能足球是否亮起。

&emsp;&emsp;若智能足球没有亮起，大概率是由于智能足球的 PanID 并不是出货设备默认值`deca` ，下面介绍如何修改智能足球的 PanID。

> 智能足球比较特殊，它的UWB 定位模块激活方式是快速旋转激活，而不是轻拍。轻拍只是唤醒智能足球的蓝牙模块。

### 2.5.1 准备工作

有电的球、安卓系统的蓝牙手机 以及相应的app安装包apk

### 2.5.2 安装安卓 apk

从 FTP <ftp://QA@192.168.30.3/Packages/Firmware/base.apk>下载，安装后出现一个名为`DataCollection`的 app。

### 2.5.3 修改智能足球PanID

#### 2.5.4.1 连接智能足球蓝牙

1. 先打开手机的蓝牙，再打开 Data Collection app(此app安装见上一节)

   > 若没有打开蓝牙，app 会闪退

2. 高速旋转激活智能足球

3. 点击右上角的 Rescan，在上面空白的列表中滑动找到与球 id 一致的设备(球外观上的黄色标签纸，即为球 ID），点击条目弹出文案：“连接下面的设备：K1_BALL_{id}”，

4. 选择确定，接着文案提示：“正在连接中，请稍后...”，待文案消失，则表示连接成功

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200113191110668.png" alt="image-20200113191110668" style="zoom:30%;" />

<center><i>（图 2.5.4.1-1 app 连接智能足球时的提示）</i></center>
#### 2.5.3.2 修改智能足球 PanID

1. 连接上球后，在右侧下方 参数 `pan id` 处，点击 R，即 read（读取），读取当前智能足球的 panid
2. 若读取后显示的值并非所需 pan id，则手动输入(不区分大小写)，再点击一次 W，即 write（写入）
3. 写入后，光标会停留在最后一个字符后面，再点击一次 R 再次读取，光标移到第一个字符前则表明写入成功

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200114113303680.png" alt="image-20200114113303680" style="zoom:35%;" />

<center><i>（图 2.5.3.2-1 修改智能足球信息）</i></center>
写入成功后，可以看到 KS app 的设备管理足球状态会亮起。

其余常用参数说明：

- 橙色区块，点击后可以读取到当前连接的智能足球电量

- uwb md，指“射频模式”，目前出货的所有设备的 UWB MODE 都应为 4。

  > - 在 6 个接收器、传感器和智能足球中，UWB 的射频模式都必须要为 4
  >
  > - 若有改动到智能足球的射频模式，需要先放到充电底座上充电几秒钟，再拿下来，更改才会生效。

- FW R，点击后可以读取到智能足球的固件版本。目前智能足球的固件版本应为 `V1.34`，若需升级固件版本，请参考章节“3.2.2 升级智能足球固件版本[link](#3.2.2 升级智能足球固件版本)”

其余参数可不用理会，另外需要注意的是，此 app 一次只能连接一颗智能足球，在连接下一颗球时，需先点击左上角的“BackMenu”退出app，再重新打开 app，找到新的球进行连接。

## 2.6 WicourtServer 升级

&emsp;&emsp;当以上设备的状态都正常亮起后，需要检查 WicourtServer 是否需要升级，即工作站里的微服务器版本升级。

操作如下：

1. KS app连接工作站WiFi，设置静态 IP，查看 app 中的设置 - ”服务器信息“，选择相应的球场，点击连接

2. 若提示有可升级版本，则点击升级 

   一般出货设备的微服务器版本都较旧，为 v1.xx 版本，现阶段的微服务器版本已经到了v2.xx 版本。两个版本差异非常大，故至少一定要升级到`V2.7.8 `版本。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200115163206923.png" alt="image-20200115163206923" style="zoom:30%;" />

> 若是刚下载的 KS app 立马就连接到工作站查看服务器信息，可能检测到工作站版本为 V1.xx，但没有提示可升级版本。可能是因为刚下载的 KS app 还未同步到云端最新的服务器版本，需要如下操作：
>
> - 将 iPad的WiFi切换回互联网，重启 app 在首页出现加载转圈，表明正在同步信息
> - 待转圈加载结束后，切换回工作站 WiFi，再次连接服务器信息尝试，若依然没有，请重复此步骤。

3. 升级时，会有进度条提示，升级成功后，可以看到最新版本已为 v2.xx

## 2.7 工作站服务器时间校准

&emsp;&emsp;操作如下：

1. KS app连接工作站WiFi，设置静态 IP，查看 app 中的设置 - ”服务器信息“ ，选择相应的球场，”服务器时间校准“选择 3s，点击校准 icon，设备立即开始时间校准，如下图：

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200115165216898.png" alt="image-20200115165216898" style="zoom:33%;" />

2. 时间校准成功会有下拉弹窗提示。若尝试了多次校准，设备依然无法完成时间校准则可能是因为此设备没有安装时间校准工具，需运维同事协助完成。

3. 有一个特殊情况，当设备正常完成时间校准，但是在第二天使用的时候”服务器信息“的时间与当前时间相差较大（大于或小于 15 分钟），或者依然提示需要时间校准，请找运维同事协助帮忙。

> 之所以进行时间校准，是因为现有很多设备的服务器时间不准确，若没有校准，则每次使用 KS app 时都会提示需要校准，没有校准会导致报告生成日期有误。

## 2.8 开始一场比赛

&emsp;&emsp;当设备都检查完毕之后，则可以将工作站正常摆放到球场四周，开始一场KS 的比赛，并查看轨迹的定位是否准确。具体如何操作 KS app 不在此文档范围内。

到此，设备出货检查项全部通过，即可打包出货。



# 3. 设置静态IP

## 3.1 iPad 端

&emsp;&emsp;将 6 个工作站都上电开机，在iPad设置中的“无线局域网”，即“WiFi”， 选择“INSAIT”[^释3.1]的网络，输入WiFi密码“GenGeeinsait”，再设置静态 IP，如下图：

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109104952383.png" alt="image-20200109104952383" style="zoom:30%;" />

<center><i>（图 3.1-1 设置静态IP）</i></center>
&emsp;&emsp;正确输入 WiFi 密码后，会出现加载状态和黄色文案提示，此时再点击右侧感叹号，进入下一个界面，并选择IPV4 地址的“配置 IP”：

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109105428535.png" alt="image-20200109105428535" style="zoom:30%;" />

<center><i>（图 3.1-2 设置静态IP）</i></center>
<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109105739609.png" alt="image-20200109105739609" style="zoom:30%;" />

<center><i>（图 3.1-3 输入静态IP）</i></center>
&emsp;&emsp;进入配置 IPV4 界面后，从“自动”改为“手动”，界面随之弹出手动设置静态 IP的相关选项：

- 移动版：192.168.1.xxx（xxx 可为 7~254，不能为 1~6、110）
- 固定版：100.100.1.xxx（xxx 可为 7~254，不能为 1~6、110）

- 子网掩码：移动版 255.255.255.0，固定版 255.255.0.0

&emsp;&emsp;正确输入后，记得点击右上角的“**存储**”，回到 WiFi 配置，会看到 WiFi 的加载状态变成了打钩，即表明静态 IP 设置正确。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200109110741418.png" alt="image-20200109110741418" style="zoom:30%;" />

<center><i>（图 3.1-4 成功设置静态IP）</i></center>

## 3.2 Windows 端

## 3.3 Mac OS 端



[^释3.1]: 根据不同的出货设备，默认的 WIFI 可能出现不同，见如下附图：

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200108175227210.png" alt="image-20200108175227210" style="zoom:30%;" />



# 4. 固件版本升级

## 4.1 传感器固件升级

### 4.1.1 如何查看传感器固件版本

&emsp;&emsp;首先，先确定当前传感器的固件版本：

1. 传感器开机，点按一次，传感器屏幕进入第二屏，即显示 K 编号，再长按大概 3 秒进入“Tracker信息”界面的第一屏；

2. 再点按一次，进入第二屏，看到以 “FW-” 开头的，后面的数字即为当前传感器的固件版本。

   现阶段，传感器固件版本都为 `v2.1.3`，若非此版本，则参照如下步骤进行升级。

### 4.1.2 升级传感器固件版本

1. **导入要升级的固件版本zip包**

+ 访问 <http://192.168.30.11/InsaitProKS/firmware-tag-release/tags> 下载最新的v2.1.3版本的 zip 文件

+ App Store 下载安装蓝牙工具 “nRF Toolbox” 

+ 将下载的 zip 发送到 iPad 或手机上，再用“nRF Toolbox” 打开。

  以下两种方式可以下载 zip 文件并发送到 iPad：

  - iPad Safari浏览器直接访问上面的zip文件下载地址，并下载。下载完后打开下载文件夹，长按 zip 文件的图标，选择“共享”，再选择“拷贝到nRF Toolbox”

    <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110140241775.png" alt="image-20200110140241775" style="zoom:20%;" />

    <center><i>（图 4.1.2-1 用 Safari 下载）</i></center>
<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110135717193.png" alt="image-20200110135717193" style="zoom:20%;" />
<center><i>（图 4.1.2-2 从文件中导入zip包）</i></center>
- Windows电脑下载后，可用电脑版QQ发送到iPad QQ（或其他方式发送到 iPad）。QQ里点击 zip 包，点击右上角的···，用其他应用打开，选择“拷贝到nRF Toolbox”
  
  <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110135322276.png" alt="image-20200110135322276" style="zoom:20%;" />
  
  <center><i>（图 4.1.2-3 从QQ中导入zip包）</i></center>

2. **使用 nRF Toolbox 升级**

> 记得先打开iPad 的蓝牙；
>
> 升级时，尽量一次打开一个或少量传感器

+ 在 nRF Toolbox 中打开后，出现如下界面，点击【SELECT DEVICE】

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110143139798.png" alt="image-20200110143139798" style="zoom:20%;" />

<center><i>（图 4.1.2-4 成功导入 zip 包）</i></center>
+ 在列表中，选择传感器的 K 编号对应的十六进制DEVICE ID，且格式为`TAG#5xxx#xxxxxxxxxxxx`的设备。

  假设需要为 K10 传感器升级固件，在下图列表中找到 `TAG#500A#xxxxxxxxxxxx` 选择即可

  > 若没有找到传感器对应的蓝牙设备，请参考章节“8. 蓝牙升级无法找到对应的蓝牙设备”[link](#8. 蓝牙升级无法找到对应的蓝牙设备)

  <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110162445783.png" alt="image-20200110162445783" style="zoom:30%;" />

  <center><i>（图 4.1.2-5 蓝牙列表选择设备）</i></center>
  选中后，回到升级页面，顶部出现刚刚选择的蓝牙设备名称，则继续点击【Upload】开始升级
  

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200110162921187.png" alt="image-20200110162921187" style="zoom:30%;" />

<center><i>（图 4.1.2-6 开始升级）</i></center>
- 升级时，nRF Toolbox中会有升级进度条，且传感器屏幕会出现“升级...”，升级成功后传感器会自动重启。

  若需验证是否升级成功，则重新查看传感器固件版本号是否已变化即可。

## 4.2 智能足球固件升级

### 4.2.1 如何查看智能足球固件版本

如何查看智能足球的固件版本，请参考章节“2.5.3.2 修改智能足球 PanID[link](#2.5.3.2 修改智能足球 PanID)”。

### 4.2.2 升级智能足球固件版本

1. 访问地址<http://192.168.30.11/InsaitProKS/firmware-ball-release/tags> 下载最新的 v1.34版本的 zip 包

2. 导入到nRF Toolbox工具，如何导入请参考章节“4.1.2 升级传感器固件版本[link](#4.1.2 升级传感器固件版本)”
3. 点击 Select Device，选择名为“K1_BALL_{id}”的设备。点击【Upload】

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200114182034667.png" alt="image-20200114182034667" style="zoom:30%;" />

<center><i>（图 4.2.2-1 智能足球升级）</i></center>
4. 升级完成，nRF Toolbox会有进度条提示。若需要验证是否升级成功，则可通过查看固件版本来判定。

## 4.3 接收头 UWB 固件升级

### 4.3.1 如何查看 UWB 固件版本

查看接收头的 UWB 固件版本，请参考如下操作：

1. 连接设备工作站 WiFi，设置静态 IP，访问要查看的工作站IP 地址（ 移动版192.168.1.1~6 其中一个，固件版100.100.1.1~6 其中一个）；

   > 工作站网页登录账号 admin，密码 xiaojiangsystem

2. 登录成功后，查看“超宽带”菜单下的"软件版本"，即 UWB 的固件版本，例如此截图的固件版本为`v1.0.18`

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210123925663.png" alt="image-20200210123925663" style="zoom:33%;" />

“超宽带”页面的更多介绍，请参考章节“2.3.2.2 超宽带”-“软件版本”[link](#2.3.2.2 超宽带)

### 4.3.2 升级 UWB 固件版本

1. 使用电脑，访问地址<http://192.168.30.11/InsaitProKS/uwb-firmware-release/tags> 下载最新的 `v1.0.18`版本的 zip 包

2. 电脑网络接入到工作站，设置静态 IP，访问要升级的工作站 IP 地址（ 192.168.1.1~6 其中一个）；

   > 工作站网页登录账号 admin，密码 xiaojiangsystem

3. 登录后，切换到“超宽带”tab 菜单，再切换左侧“升级”菜单，点击“选择文件”，选择刚刚下载保存的文件，最后，点击【升级固件】

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200115160010139.png" alt="image-20200115160010139" style="zoom:30%;" />

4. 升级时，会有进度条提示，进度条结束会弹窗提示成功与否。也可在升级成功后，刷新“超宽带”页面，验证版本号是否已变更。

## 4.4 接收头 WiFi 固件升级

### 4.4.1 如何查看 WiFi 固件版本

如何查看接收头的 WiFi 固件版本，可参照如下操作：

1. 连接设备工作 WiFi，设置静态 IP，访问要查看的工作站IP 地址（ 移动版192.168.1.1~6 其中一个，固件版100.100.1.1~6 其中一个）；

   > 工作站网页登录账号 admin，密码 xiaojiangsystem

2. 登录后，查看“管理”tab菜单下的“固件升级”菜单，“当前版本”即 WiFi 的固件版本，此处为`v1.0.25`

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210151907768.png" alt="image-20200210151907768" style="zoom:33%;" />

### 4.4.2 升级 WiFi 固件版本

==升级WiFi 固件时，请先升级副工作站，再升级主工作站。== 

1. 使用电脑，访问地址<http://192.168.30.11/InsaitProKS/wifi-firmware-release/tags> 下载最新的 `v1.0.25`版本的 zip 文件

2. 电脑网络接入到工作站，设置静态 IP，访问要升级的工作站 IP 地址（ 192.168.1.1~6 其中一个）；

   > 工作站网页登录账号 admin，密码 xiaojiangsystem

3. 登录后，切换到“管理”tab 菜单，再切换左侧“固件升级”菜单，点击“选择文件”，选择刚刚下载保存的zip文件，最后，点击【升级固件】

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200115161009460.png" alt="image-20200115161009460" style="zoom:35%;" />

4. WiFi 固件的升级相较于 UWB速度上慢很多，故需要等待较长时间。有的时候点击了升级按钮，依然没有反应，还请耐心等待。

   升级完成后，会跳转到登录页面，再次登录；登录后，查看版本若已变更，表明升级成功。

# 5. 设备隔离

&emsp;&emsp;所谓的设备隔离是指，当相近的场地需要摆放 2 套或以上的设备时，以防信号干扰，需要对每套设备分别进行WiFi 和网络标识符（PanID）的隔离，即每一套设备都需要有唯一的、不同于其他套设备的 WiFi 和 PanID。

&emsp;&emsp;隔离时，仅需更改每一套相关的设备的 WiFi和 PanID 即可，更改无先后顺序。

## 5.1 修改默认 WiFi

​		涉及到需要修改的设备：6 个工作站接收器。

&emsp;&emsp;工作站的默认 WiFi 为`INSAIT`，隔离设备时，可修改为其他具有标识意义的。例如，你将这套设备的默认 PanID 从`deca`改成了 `dec1`，那么命名 WiFi 时可为 INSAIT-DEC1。

​		==修改顺序请一定从 副工作站 再到 主工作站==，主工作站最后再修改，步骤如下：

- 将设备工作站全部开机

- iPad 或电脑连接设备 WiFi 并设置静态IP，设置静态 IP 请参考章节”3. 设置静态IP“[link](#3. 设置静态IP)

- 在浏览器中打开工作站网页，先访问副工作站，例如 192.168.1.2（固定版 100.100.1.2）

  > 工作站网页登录账号 admin，密码 xiaojiangsystem

- 登录成功后，切换到菜单“无线”，只需修改 SSID，并且应用。

  例如这里将使用“INSAIT-DEC1”为隔离设备的 WiFi 名称，那就直接输入即可，之后的其余几个设备 SSID 也是如此复制黏贴即可（最好复制黏贴，以免手动输入错误）

<img src="\INSAIT K 设备使用说明文档.assets\image-20200109094922756-1578724.png" alt="image-20200109094922756" style="zoom:33%;" />

- 当所有工作站的 SSID 都修改完成后，使用 KS app 连接此新的 WiFi，再进入 app 的“设置-设备管理”查看工作站状态是否都已亮起，若都亮起即表明修改成功。

&emsp;&emsp;具体跟 WiFi 相关的操作，还可参考章节”2.3.2.5 无线“[link](#2.3.2.5 无线)，在该页面只需修改 SSID 保存即可，==修改顺序请一定从 副工作站 再到 主工作站==。

## 5.2 修改默认 PanID

&emsp;&emsp;修改默认 PanID，涉及到的设备：6 个接收器、智能足球 和 所有的传感器。

### 5.2.1 接收器：

1. iPad 接入工作站 WiFi，设置静态 IP，访问每个接收头的设置网页（移动版192.168.1.1~6，固定版 100.100.1.1~6）

2. 切换到”超宽带“菜单页，修改"网络标志符"（即 PanID），点击应用即可。

   例如，假设这里要讲默认的`deca`修改成`dec1`，则输入`dec1`而后点击【应用】按钮即可。

   切记，==先修改副工作站==，再修改主工作站。

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210151630084-1578730.png" alt="image-20200210151630084" style="zoom:33%;" />

​	更多超宽带设置详情，具体操作可参考”2.3.2.2 超宽带[link](#2.3.2.2 超宽带)“

### 5.2.2 智能足球：

通过安卓手机的蓝牙工具进行修改，具体参考”2.5.3 修改智能足球PanID[link](#2.5.3 修改智能足球PanID)“

### 5.2.3 传感器：

安卓手机的 NFC读写传感器，具体参考”2.4.3 NFC 修改传感器配置信息[link](#2.4.3 NFC 修改传感器配置信息)“



# 6. 接收器更换

更换需要注意的事项：

- 开始采集比赛后，只能更换副接收器，不建议更换主接收器
- 确保备用的接收器的 WiFi 和 PanID 与正在使用的设备是一致
- 备用的副接收器只能与其余的 5 个副接收器替换，备用的主接收器只能与主接收器替换。除非是有经过特殊设置的接收器，才能主、副无区别替换。

## 6.1 通过工作站底座



- **副工作站**：

​		假设，副工作站的B接收器坏了，需要用备用的 C接收器替换。那么可以按如下操作替换。

1. 不用断电，将 B 工作站的接收器从工作站底座中抽出，将备用 C 插回去

2. 备用 C 插上后，过一会儿底座工作站屏幕会显示 C，然后，长按工作站底座的切换按钮，直到屏幕上的C字母位出现闪烁，松开

3. 接着，再短按一次切换按钮，字母位会切换一次，如此反复短按按钮，直到出现B

4. 出现 B 字母后，再次长按切换按钮，直至屏幕出现 waiting 的字样，即可松开，设置完成。

   可到 KS app 的设备管理，查看工作站状态是否已经正常亮起。

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200117165212318.png" alt="image-20200117165212318" style="zoom:33%;" />

- **主接收器**

  只要确认备用主接收器与正在使用的主接收器是同一个 PanID 和 WiFi ，那么无需做任何设置，替换插上即可直接使用。
  
  

## 6.2 通过接收器网页

  1. 连接到工作站的 WiFi，设置静态 IP(可参考”3. 设置静态IP[link](#3. 设置静态IP)“)，浏览器访问要修改的接收器的网页地址。

     例如：要将**接收器 C 改为 B**，那么浏览器请访问C 接收器网页地址 192.168.1.3

     > 工作站网页登录账号 admin，密码 xiaojiangsystem

  2. 先切换到”超宽带“菜单，将参数 `ID` 从 c003 修改成c002，应用保存

     <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210154202294.png" alt="image-20200210154202294" style="zoom:33%;" />

  3. 再切换到”网络“菜单，修改`IP地址`，将192.168.1.3 修改为 192.168.1.2，应用保存

     <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210154337622.png" alt="image-20200210154337622" style="zoom:33%;" />

  4. 返回到KS app 可以看到工作站状态已经亮起，或者直接查看工作站底座屏幕的字母，C 已变成 B

# 7. 无法访问接收器网页

当通过连接工作站 WiFi 访问各个接收头的设置网页时，网页依然打不开，KS app 上的工作站状态也没有亮起。此时，只能通过有线连接了。

> 此场景大概率是由于接收头的 WiFi SSID 设置与当前连接的WiFi 不同，或者 IP 地址设置错误导致的。

1. **工具**：

- 航空接收头转接器
- 网线
- 变压充电器

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200120141913029.png" alt="image-20200120141913029" style="zoom:30%;" />

2. **操作**：

- 将接收头与航空转换器连接，将网线两端分别插入航空转换器和电脑的网口，最后将充电器 DC 口接入航空转换器，插头上电，接收头的指示灯亮起

- 电脑端打开“网络共享中心”，点击以太网，属性 - TCP/IPv4 ，设置静态 IP

  <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200120143003867.png" alt="image-20200120143003867" style="zoom:33%;" />

  > 设置静态 IP 根据情况有如下三种网段：
  >
  > - 移动版：192.168.1.xxx（xxx 可为 7~254，不能为 1~6）
  > - 固定版：100.100.1.xxx（xxx 可为 7~254，不能为 1~6）
  > - **通用模式**：192.168.58.xxx（xxx 不能为 58）（此模式应用于接收器的 IP 不确定时）

- 设置静态 IP 后，如果是移动版则访问 192 网段开头的，固定版则访问 100 网段开头的。

  例如：接收器 B 坏了，那么就访问 192.168.1.2（固定版 100.100.1.2），如果都无法打开，则需要设置通用模式的静态 IP 192.168.58.xxx，然后，必须访问 192.168.==58.58==

> 工作站网页登录账号 admin，密码 xiaojiangsystem

- 访问成功后，结合出货设备设置与当前使用设置，将内部的参数一一检查设置，详细可参考章节“2.3.2 工作站未亮起[link](#2.3.2 工作站未亮起)”

  主要需要关注的参数为：PanID、ID、服务器 IP、IP 地址、WiFi SSID和口令。



# 8. 蓝牙升级无法找到对应的蓝牙设备

​		在INSAIT K系列的设备中，会使用蓝牙工具nRF Toolbox升级的设备有传感器和智能足球。而有的时候在搜寻设备的蓝牙时，会出现找不到该设备对应的蓝牙。这里举例最常遇到的传感器升级找不到对应的蓝牙。

1. 准备：

   LightBlue app、nRF Toolbox和有电的传感器

2. 操作：

   从 appstore下载 LightBlue 和nRF Toolbox后，将传感器开机，打开 iPad 蓝牙，打开 Toolbox app。

   假设此时nRF Toolbox找不到传感器对应的设备名（格式为`TAG#5xxx#xxxxxxxxxxxx`），那么再打开 LightBlue，找到名为`WT#Dfu`或者`TAG#XXXX#FW-X.X.XX`的设备点击连接，再返回，蓝牙自动断开连接之后，会看到该设备名称自动刷新：

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200210123216611.png" alt="image-20200210123216611" style="zoom:33%;" />

3. 再次升级：

   回到 nRF Toolbox 就可以找到正确的传感器蓝牙了。



# 9. 传感器的生产工程检测模式 

​		此场景主要运用于检测传感器的不良率。

1. 工具：

- NFC 配置 app
- 安卓 NFC 手机
- 有电的传感器

2. 使用安装有 NFC 配置 app 的安卓手机，读取传感器的配置信息（操作可参考章节“2.4.3 NFC 修改传感器配置信息”[link](#2.4.3 NFC 修改传感器配置信息)），修改参数`Test Mode`的值为 255，再写入。

3. 写入成功后，传感器的屏幕变成如下：

   <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200120160944788.png" alt="image-20200120160944788" style="zoom:30%;" />

图中第一行表示屏幕重启次数、心率重启次数、两者的总次数。第二行第一位表示心率复位次数。

4. 在测试时，可以将传感器设置成此模式，使用 1-2 个小时后查看是否以上参数不为 0，从而检查出不良的传感器。对于正常的、都为 0 的传感器，可以将 test mode 修改为0 写回去，恢复常规使用模式。

# 10. 二代传感器修改为一代传感器 

# 11. 原始数据下载

## 11.1 打开下载页面

1. 电脑网络连接到设备工作站WiFi，并手动配置静态IP；

2. 在电脑浏览器中，访问地址：http://192.168.1.110:18080 

页面打开后，点击右上角的Log Record

 <img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200120140446517.png" alt="image-20200120140446517" style="zoom:33%;" />

会跳转到这个页面地址：http://192.168.1.110:18080/log-record.html （也可以直接访问此地址）

<img src="/Users/sheldon/Documents/INSAIT K 设备使用说明文档.assets/image-20200120140541837.png" alt="image-20200120140541837" style="zoom:33%;" />

## 11.2 页面菜单简介

各个菜单下的记录命名格式和代表含义：

- ***TDOA***: 

  > {UUID}-tdoa.log ( 有使用传感器的，都会在此菜单下生成一份log )
  >
  > t-{date}-tdoa.log ( 不会使用到的数据，不用关心 ) 

- ***MONITOR***: 

  >  {UUID}-MONITOR.zip（KS比赛）
  >
  > k1_{UUID}-MONITOR.zip（KS训练）
  >
  > b1_{UUID}-MONITOR.zip（KB比赛或训练）

- ***MATCH***:

  > {UUID}.zip（KS比赛）
  >
  > b1_{UUID}.zip（KB比赛） 

- ***TRAINING***: 

  > k1_{UUID}.zip（KS训练）
  >
  > b1_{UUID}.zip（KB训练）

- ***FITNESS***: 

  > {UUID}.zip（KV）

## 11.3 如何选择下载

根据使用的 INSAIT app，确定哪几个菜单下的原始记录需要下载：

- 若是为了保存一场正常的记录，则只需下载TDOA的 log 和 MATCH\TRAINING 下的zip即可；

- 若是为了测试某场异常的记录，则不仅要下载TDOA log和zip，还需要MONITOR菜单下的zip；

  

## 11.4 如何定位下载记录

根据Last Modified来定位要下载的数据记录，此为比赛/训练的结束时间，下载以同一个UUID命名的数据记录。

***举例***：

用户在2019年12月27日14:00开始了一场KS的比赛，并于110分钟后结束比赛。

（计算比赛时间，请记得加上中场休息的时间，而不是直接看比赛回放中的总时长。）

那么，访问到该下载页面时，在Last Modified中定位的记录为：时间为2019-12-27 15:50左右、且是以UUID命名的记录，再点击右侧的download按钮即可开始下载。

（上图中的“B7F139E0-A43C-49F0-96A7-C5CCEAFB55F8“为一个UUID）


